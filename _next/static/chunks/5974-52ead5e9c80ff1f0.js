"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5974],{95702:function(e,t,a){a.d(t,{c:function(){return CoinIcon}});var o=a(31113),n=a(26758);let r={iBGT:"webp","HONEY-WBERA":"webp"};function CoinIcon(e){let{symbol:t,size:a=48,...s}=e,c=t in r?r[t]:"svg",l="".concat(n.G,"/").concat(t,".").concat(c);return(0,o.jsx)("img",{...s,width:a,height:a,src:l,alt:t})}},68535:function(e,t,a){let o;a.d(t,{l:function(){return getBvaultEpochYtPrices},A:function(){return getBvaultPtSynthetic}});var n=a(44769),r=a(83606);let instance=()=>(o&&o.defaults.baseURL==="https://beta-api.".concat(n.Kh.value)||(o=r.Z.create({baseURL:"https://beta-api.".concat(n.Kh.value),timeout:1e4,headers:{"Content-Type":"application/json"}})),o);var s={get:async function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.startsWith("/auth")){let e=localStorage.getItem("earlyaccess-token");if(!e)throw"Need token";o.headers={...o.headers||{},Authorization:e}}let n=await instance().get(e,{...o,params:a});if(console.info("res:",null==n?void 0:n.data),(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.code)!==200)throw n.data;return n.data.data},post:async function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.startsWith("/auth")){let e=localStorage.getItem("earlyaccess-token");if(!e)throw"Need token";o.headers={...o.headers||{},Authorization:e}}let n=await instance().post(e,a,o);if((null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.code)!==200)throw n.data;return n.data.data}};let getBvaultEpochYtPrices=(e,t)=>s.get("/api/bvault/getEpochYTPrices/".concat(e,"/").concat(t)),getBvaultPtSynthetic=(e,t)=>s.get("/api/bvault/getEpochPtSynthetic/".concat(e,"/").concat(t))},87031:function(e,t,a){a.d(t,{Fw:function(){return l},TE:function(){return c},_C:function(){return s},cc:function(){return u}});var o=a(73216);let n="0xF86a9a53D963B7a845F3496a97d0dB11cEc3c4E0",r="0x97d82C639835F4EfaCC366fdE78CA0c4EC2a2A83",s={[o.BG.id]:"0x8685CE9Db06D40CBa73e3d09e6868FE476B5dC89"},c={[o.BG.id]:"0x0e4aaf1351de4c0264c5c7056ef3777b41bd8e03"},l={[o.BG.id]:[{vault:"0x6a6B9817d221816187aD335030b0EF7c17051EfA",asset:"0xD69ADb6FB5fD6D06E6ceEc5405D95A37F96E3b96",assetSymbol:"HONEY-USDC",pToken:"0xbB6A3a94cccAe455444e9a1E1CD478CAc278Be3E",pTokenSymbol:"pHONEY-USDC",yTokenSymbol:"yHONEY-USDC",protocolAddress:n,protocolSettingsAddress:r},{vault:"0xF484F7D00DD44c1F8B047b79cF8674e78FEcaba7",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x9C476C0Ee24768fE74b5A6768a7E7c901e51E409",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:n,protocolSettingsAddress:r},{vault:"0xF778D2B9E0238D385008e916D7245F51959Ba279",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x1f779e869E4769bD9129b7FE8B3a46350FA2Fbe7",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:n,protocolSettingsAddress:r},{vault:"0x686C72Aecf2D08410A8270D514B0Dc3Cc72e5288",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x19fa905c43B7B3e4698266250f2f7909610b54B1",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:n,protocolSettingsAddress:r,onEnv:["beta"]},{vault:"0xB0a0C11a77E67acBD161cc44743a1774f2C4Fff5",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x8b117042C1C6C45656bE0A2160CEbD405C6016bc",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:n,protocolSettingsAddress:r,onEnv:["beta","test"]},{vault:"0x90e0A49726c2fF0fa6e4382446688AF883d10133",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0xEA45BD60bc0f7848759ACaE9B938c24D2Ea7481c",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:n,protocolSettingsAddress:r,onEnv:["beta"]},{vault:"0x9700FEa232560E4048DD924623491926282125bE",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x575287Cd8CB9A49e0EE00Bf0C71Eac337Ab8FeBa",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:n,protocolSettingsAddress:r,onEnv:["beta"]}]},u={[o.BG.id]:"0xa6b985dDa4D24B66fd4Ac2041395a82DcAdfD877"}},26758:function(e,t,a){a.d(t,{G:function(){return n}});var o=a(28070);let n=o.env.NEXT_PUBLIC_BASE_PATH||""},90168:function(e,t,a){a.d(t,{P:function(){return o}}),a(19757);let o={"0xD69ADb6FB5fD6D06E6ceEc5405D95A37F96E3b96":{poolType:36000n,base:"0x0e4aaf1351de4c0264c5c7056ef3777b41bd8e03",quote:"0xd6d83af58a19cd14ef3cf6fe848c9a4d21e5727c"},"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7":{poolType:36000n,base:"0x0e4aaf1351de4c0264c5c7056ef3777b41bd8e03",quote:"0x7507c1dc16935b82698e4c63f2746a2fcf994df8"}}},22139:function(e,t,a){a.d(t,{Hj:function(){return r},Pq:function(){return s},SH:function(){return l},Vi:function(){return u},pn:function(){return c},v:function(){return n},xb:function(){return DOC_LINK}});var o=a(44769);let n="https://x.com/ZooFinanceIO",r="https://t.co/RJwdwdawe5",s=BigInt(1e18),c=BigInt(1e8),l=BigInt("31536000"),DOC_LINK=()=>"https://docs.".concat(o.Kh.value),u="beta";console.info("production")},44769:function(e,t,a){a.d(t,{Kh:function(){return n},Vi:function(){return useConfigDomain}});var o=a(64103);let n={value:"zoofi.io"},r=["zoofi.io","zoofi.xyz"],getAvilableDomain=()=>{var e;if("localhost"==location.hostname||(null===(e=location.hostname.match(/^\d+\.\d+\.\d+\.\d+$/))||void 0===e?void 0:e.length)==1)return r[0];let t=location.hostname.split("."),a=t.slice(-2).join(".");return("ipns"==t[1]&&(a=t[0].replaceAll("-",".")),r.includes(a))?a:r[0]};function useConfigDomain(){(0,o.useEffect)(()=>{n.value=getAvilableDomain()},[])}},18358:function(e,t,a){a.d(t,{R3:function(){return useUpBVaultForUserAction},Vw:function(){return useEpochesData},d6:function(){return useResetBVaultsData},gz:function(){return useCalcClaimable},lL:function(){return calcBVaultPTApy},nr:function(){return useBVault},oU:function(){return useBVaultApy},pg:function(){return calcBVaultBoost},qM:function(){return useBVaultCurrentEpoch},v7:function(){return useBVaultBoost}});var o=a(22139),n=a(59175),r=a(26361),s=a(84944),c=a(83978),l=a.n(c),u=a(64103),i=a(96670),d=a(3106);function useResetBVaultsData(){let e=(0,n.p)(),{address:t}=(0,i.m)();(0,u.useEffect)(()=>{},[e]),(0,u.useEffect)(()=>{d.w.getState().sliceUserBVaults.reset()},[t])}function useBVault(e){let t=(0,d.R)(t=>t.sliceBVaultsStore.bvaults[e]||(0,r.Yb)({},0n));return t}function useBVaultCurrentEpoch(e){return(0,d.R)(t=>t.sliceBVaultsStore.bvaultsCurrentEpoch[e]||(0,r.Yb)({},0n))}function useEpochesData(e){let t=function(e){let t=useBVault(e),a=(0,u.useMemo)(()=>a=>{if(t.epochCount<=0n)return[];let o=l().range(1,parseInt((t.epochCount+1n).toString())).reverse(),n=a.sliceBVaultsStore.epoches,s=a.sliceBVaultsStore.epochesRedeemPool;return o.map(t=>{let a=n["".concat(e,"_").concat(t)],o=s["".concat(e,"_").concat(t)];return a&&o?(0,r.Yb)({...a,...o},0n):null}).filter(e=>null!=e)},[t]);return(0,d.R)(a)}(e),a=(0,d.R)(t=>t.sliceUserBVaults.epoches[e]||[]);return(0,u.useMemo)(()=>{let e=a.reduce((e,t)=>({...e,[t.epochId.toString()]:t}),{});return t.map(t=>(0,r.Yb)({...t,...e[t.epochId.toString()]||{bribes:[]}},0n))},[t,a])}function useCalcClaimable(e){let t=useEpochesData(e);return(0,u.useMemo)(()=>{let e=t.filter(e=>e.claimableAssetBalance&&e.settled);return{ids:e.map(e=>e.epochId),claimable:e.reduce((e,t)=>e+t.claimableAssetBalance,0n)}},[t])}function calcBVaultBoost(e){let t=d.w.getState(),a=t.sliceBVaultsStore.bvaults[e],o=t.sliceBVaultsStore.bvaultsCurrentEpoch[e],n=a&&o&&o.assetAmountForSwapYT>0n?100n*a.lockedAssetTotal/o.assetAmountForSwapYT:100000n;return n}function useBVaultBoost(e){let t=(0,d.R)(()=>calcBVaultBoost(e));return[(0,s.d)(t,0,2),t]}function calcBVaultPTApy(e){let t=d.w.getState(),a=t.sliceBVaultsStore.bvaultsCurrentEpoch[e],n=a&&a.pTokenSynthetic>0n?a.assetAmountForSwapYT*o.SH*BigInt(1e10)/a.pTokenSynthetic:0n;return n}function useBVaultApy(e){let t=(0,d.R)(()=>calcBVaultPTApy(e));return[(0,r.Jh)(t,10),t]}function useUpBVaultForUserAction(e){let{address:t}=(0,i.m)();return()=>{(0,r.XD)(async()=>{if(!t)return;await Promise.all([d.w.getState().sliceTokenStore.updateTokensBalance([e.asset,e.pToken],t),d.w.getState().sliceTokenStore.updateTokenTotalSupply([e.asset,e.pToken]),d.w.getState().sliceBVaultsStore.updateBvaults([e])]);let a=d.w.getState().sliceBVaultsStore.bvaults[e.vault];await Promise.all([await d.w.getState().sliceBVaultsStore.updateBvaultsCurrentEpoch({[e.vault]:a}),await d.w.getState().sliceBVaultsStore.updateEpoches(e,a.epochCount>1n?[a.epochCount,a.epochCount-1n]:[a.epochCount])]),await d.w.getState().sliceBVaultsStore.updateEpochesRedeemPool(e);let o=[];for(let t=parseInt(a.epochCount.toString());t>0;t--){let a=d.w.getState().sliceBVaultsStore.epoches["".concat(e.vault,"_").concat(t)],n=d.w.getState().sliceBVaultsStore.epochesRedeemPool["".concat(e.vault,"_").concat(t)].settled;o.push({epochId:BigInt(t),redeemPool:a.redeemPool,settled:n})}console.info("onUserAction:epoches",o),await d.w.getState().sliceUserBVaults.updateEpoches(e,t,o)},3,1e3)}}d.w.subscribe(e=>e.sliceBVaultsStore.bvaults)},3106:function(e,t,a){a.d(t,{w:function(){return S},R:function(){return useStoreShallow}});var o=a(83978),n=a.n(o),r=a(64103),s=a(93108),c=a(43794),l=a(16850),u=a(87031),i=a(73216),d=a(90168),p=a(58714),f=a(62531),b=a(78403),m=a(68535),B=a(22139),h=a(19757);let g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(a,o)=>n().mapValues(e,(e,n)=>e(e=>a({[n]:{...o()[n],...e}}),()=>o()[n],t[n]))}({sliceBVaultsStore:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},getLpAmount=async(e,t)=>{let a=(0,b.B)();await Promise.all(e.map(e=>{let o=d.P[e.asset];return o?Promise.all([a.readContract({abi:l.Mi,address:u._C[(0,i.BV)()],functionName:"queryPrice",args:[o.base,o.quote,o.poolType]}),a.readContract({abi:l.Mi,address:u._C[(0,i.BV)()],functionName:"queryLiquidity",args:[o.base,o.quote,o.poolType]}),a.readContract({abi:p.Wo,address:e.asset,functionName:"totalSupply"})]).then(o=>{if(!o)return null;let n=t[e.vault],[r,s,c]=o,d=s*n.lockedAssetTotal/c;return a.readContract({abi:l.NE,address:u.cc[(0,i.BV)()],functionName:"liqToTokens",args:[d,r]}).then(e=>{let[t,a]=e;n.lpLiq=d,n.lpBase=t,n.lpQuote=a})}):null}))},updateBvaults=async a=>{let o=(0,b.B)(),n=await Promise.all(a.map(e=>Promise.all([o.readContract({abi:l.j5,address:e.vault,functionName:"epochIdCount"}),o.readContract({abi:p.Wo,address:e.pToken,functionName:"totalSupply"}),o.readContract({abi:l.j5,address:e.vault,functionName:"assetBalance"}),o.readContract({abi:l.j5,address:e.vault,functionName:"paramValue",args:[(0,f.$G)("f2",{size:32})]}),o.readContract({abi:l.j5,address:e.vault,functionName:"closed"}).catch(()=>!1)]).then(e=>{let[t,a,o,n,r]=e;return{epochCount:t,pTokenTotal:a,lockedAssetTotal:o,f2:n,closed:r}}))),r=n.reduce((e,t,o)=>({...e,[a[o].vault]:t}),{});return await getLpAmount(a,r),e({bvaults:{...t().bvaults,...r}}),r},updateBvaultsCurrentEpoch=async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t().bvaults,o=(0,b.B)(),r=n().keys(a).map(e=>e);if(0==r.length)return{};let s=await Promise.all(r.map(e=>Promise.all([a[e].epochCount&&"0xF778D2B9E0238D385008e916D7245F51959Ba279"!==e?o.readContract({abi:l.j5,address:e,functionName:"Y"}):Promise.resolve(0n),a[e].epochCount?o.readContract({abi:l.j5,address:e,functionName:"yTokenTotalSupply",args:[a[e].epochCount]}):0n,a[e].epochCount?(0,m.A)(e,a[e].epochCount).then(e=>BigInt(e)):0n,a[e].epochCount?o.readContract({abi:l.j5,address:e,functionName:"assetTotalSwapAmount",args:[a[e].epochCount]}):0n,a[e].epochCount?o.readContract({abi:l.j5,address:e,functionName:"yTokenUserBalance",args:[a[e].epochCount,e]}):0n]).then(e=>{let[t,a,o,n,r]=e;return{Y:t,yTokenTotalSupply:a,pTokenSynthetic:o,assetAmountForSwapYT:n,yTokenAmountForSwapYT:a-r}}))),c=s.reduce((e,t,a)=>({...e,[r[a]]:t}),{});return e({bvaultsCurrentEpoch:{...t().bvaultsCurrentEpoch,...c}}),c},updateEpoches=async(a,o)=>{var r;let s=o||n().range(1,parseInt((((null===(r=t().bvaults[a.vault])||void 0===r?void 0:r.epochCount)||0n)+1n).toString())).map(e=>BigInt(e));if(0==s.length)return{};let c=(0,b.B)(),u=await Promise.all(s.map(e=>Promise.all([c.readContract({abi:l.j5,address:a.vault,functionName:"epochInfoById",args:[e]}),c.readContract({abi:l.j5,address:a.vault,functionName:"yTokenTotalSupply",args:[e]}),(0,m.A)(a.vault,e).then(e=>BigInt(e)),c.readContract({abi:l.j5,address:a.vault,functionName:"yTokenUserBalance",args:[e,a.vault]})]).then(e=>{let[t,a,o,n]=e;return{...t,yTokenTotal:a,pTokenSynthetic:o,vaultYTokenBalance:n}}))),i=u.reduce((e,t)=>({...e,["".concat(a.vault,"_").concat(t.epochId.toString())]:t}),{});return e({epoches:{...t().epoches,...i}}),i},updateEpochesRedeemPool=async function(a){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t().epoches,r=n().keys(o).map(e=>({vault:e.split("_")[0],epochId:BigInt(e.split("_")[1]),epoch:o[e]}));if(0==r.length)return{};let s=(0,b.B)(),c=await Promise.all(r.map(e=>s.readContract({abi:l.gg,address:e.epoch.redeemPool,functionName:"settled"}).then(e=>({settled:e})))),u=c.reduce((e,t,o)=>({...e,["".concat(a.vault,"_").concat(r[o].epochId.toString())]:t}),{});return e({epochesRedeemPool:{...t().epochesRedeemPool,...u}}),u},updateEpochesYTprice=async(e,t)=>{let a=(0,b.B)();return a.getBlock(),a.getBlockNumber(),[]};return{bvaults:{},bvaultsCurrentEpoch:{},epoches:{},epochesRedeemPool:{},epochesYTprice:{},...a,updateBvaults,updateBvaultsCurrentEpoch,updateEpoches,updateEpochesRedeemPool,updateEpochesYTprice}},sliceLVaultsStore:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},updateLVaults=async a=>{let o=(0,b.B)();if(0==a.length)return{};let n=await Promise.all(a.map(e=>Promise.all([o.readContract({abi:l.Wn,address:e.vaultQuery,functionName:e.isStable?"getStableVaultState":"getVaultState",args:[e.vault]}),o.readContract({abi:l.WW,address:e.vault,functionName:"assetBalance"}),o.readContract({abi:l.WW,address:e.vault,functionName:"usdTotalSupply"}),o.readContract({abi:l.WW,address:e.vault,functionName:"vaultMode"}),o.readContract({abi:l.WW,address:e.vault,functionName:"paramValue",args:[(0,f.$G)("Y",{size:32})]}),e.ptyPoolBelowAddress?o.readContract({abi:l.aT,address:e.ptyPoolBelowAddress,functionName:"totalStakingBalance"}):Promise.resolve(0n),e.ptyPoolAboveAddress?o.readContract({abi:l.aT,address:e.ptyPoolAboveAddress,functionName:"totalStakingBalance"}):Promise.resolve(0n),e.ptyPoolBelowAddress?o.getBalance({address:e.ptyPoolBelowAddress}):Promise.resolve(0n),o.readContract({abi:l.nq,address:e.assetTokenFeed,functionName:"latestPrice"}),o.readContract({abi:l.WW,address:e.vault,functionName:"paramValue",args:[(0,f.$G)("CircuitBreakPeriod",{size:32})]})]).then(t=>{let[a,o,n,r,s,c,l,u,i,d]=t,p=BigInt(Math.floor(new Date().getTime()/1e3)),f=e.isStable?a.M_USDCx>0n&&a.aar<a.AARS:2==r&&(a.aar>=a.AARC||p-a.AARBelowCircuitBreakerLineTime>d);return{...{...a,isStable:!!e.isStable},assetBalance:o,usbTotalSupply:n,vaultMode:e.isStable?a.aar<a.AARS&&a.M_USDC>0n?2:1:r,Y:s,buyPoolTotalStaking:c,sellPoolTotalStaking:l,buyPoolBalance:u,latestPrice:i*B.Pq/B.pn,CircuitBreakPeriod:d,discountEnable:f}}))),r=n.reduce((e,t,o)=>({...e,[a[o].vault]:t}),{});return e({lvaults:{...t().lvaults,...r}}),r},updateUserLVault=async(a,o)=>{let n=(0,b.B)();if(a.isStable)return;let[r,s,c,u,i,d,p]=await Promise.all([n.readContract({abi:l.aT,address:a.ptyPoolBelowAddress,functionName:"userStakingBalance",args:[o]}),n.readContract({abi:l.aT,address:a.ptyPoolBelowAddress,functionName:"earnedMatchedToken",args:[o]}),n.readContract({abi:l.aT,address:a.ptyPoolBelowAddress,functionName:"earnedStakingYields",args:[o]}).catch(()=>0n),n.readContract({abi:l.aT,address:a.ptyPoolBelowAddress,functionName:"earnedMatchingYields",args:[o]}),n.readContract({abi:l.aT,address:a.ptyPoolAboveAddress,functionName:"userStakingBalance",args:[o]}),n.readContract({abi:l.aT,address:a.ptyPoolAboveAddress,functionName:"earnedMatchedToken",args:[o]}),n.readContract({abi:l.aT,address:a.ptyPoolAboveAddress,functionName:"earnedMatchingYields",args:[o]})]),f={buyPool_userStakingBalance:r,buyPool_earnedMatchedToken:s,buyPool_earnedStakingYields:c,buyPool_earnedMatchingYields:u,sellPool_userStakingBalance:i,sellPool_earnedMatchedToken:d,sellPool_earnedMatchingYields:p};return e({user:{...t().user,[a.vault]:f}}),f};return{lvaults:{},user:{},...a,updateLVaults,updateUserLVault}},sliceTokenStore:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},updateTokenTotalSupply=async a=>{if(0==a.length)return{};let o=(0,b.B)(),n=await Promise.all(a.map(e=>e==h.K8?Promise.resolve(0n):o.readContract({abi:p.Wo,address:e,functionName:"totalSupply"}))),r=n.reduce((e,t,o)=>({...e,[a[o]]:t}),{});return e({totalSupply:{...t().totalSupply,...r}}),r},updateTokensBalance=async(a,o)=>{if(0==a.length)return{};let n=(0,b.B)(),r=await Promise.all(a.map(e=>e==h.K8?n.getBalance({address:o}):n.readContract({abi:p.Wo,address:e,functionName:"balanceOf",args:[o]}))),s=r.reduce((e,t,o)=>({...e,[a[o]]:t}),{});return e({balances:{...t().balances,...s}}),s},updateTokenPrices=async a=>{let o=(0,b.B)(),r=n().groupBy(a,e=>d.P[e]?"lp":"token"),s=r.lp||[];if(0!==s.length){console.info("mlps;",a,s);let n=await Promise.all(s.map(e=>Promise.all([o.readContract({abi:l.Mi,address:u._C[(0,i.BV)()],functionName:"queryPrice",args:[d.P[e].base,d.P[e].quote,BigInt(d.P[e].poolType)]}),o.readContract({abi:l.Mi,address:u._C[(0,i.BV)()],functionName:"queryLiquidity",args:[d.P[e].base,d.P[e].quote,BigInt(d.P[e].poolType)]})]))),r={[u.TE[(0,i.BV)()]]:B.Pq};s.forEach((e,t)=>{let a=d.P[e].base,o=d.P[e].quote,s=n[t][0],c="0xd6d83af58a19cd14ef3cf6fe848c9a4d21e5727c"==o?10n**6n:1n;r[e]=s/c**2n,r[o]=(s*10n**9n/(0x10000000000000000n*c))**2n*r[a]/B.Pq}),console.info("lpPrics:",r),e({prices:{...t().prices,...r}})}return{}};return{totalSupply:{},updateTokenTotalSupply,balances:{},updateTokensBalance,prices:{},updateTokenPrices,...a}},sliceUserBVaults:(e,t,a)=>{let updateEpoches=async(a,o,n)=>{let r=n.filter(e=>e.epochId>0n);if(0==r.length)return{};let s=(0,b.B)();console.info("updateEpoches:",r);let c=await Promise.all(r.map(e=>{let{epochId:t,redeemPool:n,settled:r}=e;return Promise.all([s.readContract({abi:l.j5,address:a.vault,functionName:"calcBribes",args:[t,o]}),r?Promise.resolve(0n):s.readContract({abi:l.gg,address:n,functionName:"userRedeemingBalance",args:[o]}).catch(()=>0n),s.readContract({abi:l.gg,address:n,functionName:"earnedAssetAmount",args:[o]}),s.readContract({abi:l.j5,address:a.vault,functionName:"yTokenUserBalance",args:[t,o]}),s.readContract({abi:l.j5,address:a.vault,functionName:"yTokenUserBalanceSynthetic",args:[t,o]})]).then(e=>{let[a,o,n,r,s]=e;return{epochId:t,bribes:a,redeemingBalance:o,claimableAssetBalance:n,userBalanceYToken:r,userBalanceYTokenSyntyetic:s}})})),u=await Promise.all(c.map(e=>{let{epochId:t,bribes:o}=e;return Promise.all(o.map(e=>Promise.all([s.readContract({abi:l.j5,address:a.vault,functionName:"bribeTotalAmount",args:[t,e.bribeToken]}),s.readContract({abi:p.Wo,address:e.bribeToken,functionName:"symbol"})]).then(t=>{let[a,o]=t;return{...e,totalRewards:a,bribeSymbol:o}})))})),i=c.map((e,t)=>({...e,bribes:u[t]})).sort((e,t)=>parseInt((t.epochId-e.epochId).toString()));return e({epoches:{...t().epoches,[a.vault]:i}}),i};return{epoches:{},...a,updateEpoches,reset:()=>e({epoches:{}})}}},{}),v=(0,c.mW)(g,{name:"BoundStore",store:"BoundStore",enabled:!0}),S=(0,s.Ue)(v);function useStoreShallow(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=S();return(0,r.useMemo)(()=>e(a),[a,...t])}},84944:function(e,t,a){a.d(t,{d:function(){return displayBalance}});var o=a(35057);let displayBalance=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18;if(!e)return"0";let fmtNumber=e=>e.toLocaleString("en-US",{maximumFractionDigits:t}),n=Number((0,o.b)(e,a)),r=Number((.1**t).toFixed(t));return n>0&&n<r?n<.001?fmtNumber(1e6*n)+"μ":"<"+r:n<0&&n>-r?"≈0":fmtNumber(n)}}}]);