(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9102],{92537:function(e,s,a){Promise.resolve().then(a.bind(a,57738))},57738:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return Vaults}});var t=a(31113),n=a(30639),l=a(4283),i=a(73417),d=a(73216),c=a(22139),r=a(15506),o=a(26361),x=a(49340),m=a(18358),u=a(84944),h=a(42487),b=a.n(h),p=a(69708),j=a(64103),f=a(85665),v=a(20265),g=a(67541),N=a(48914),w=a(32843),k=a(99548),y=a(91214),T=a(95702),B=a(75496),C=a(16738);function Switch(e){return(0,t.jsx)("div",{style:{padding:1,border:"1px solid transparent",backgroundRepeat:"no-repeat",backgroundClip:"padding-box,border-box",backgroundOrigin:"padding-box,border-box",backgroundImage:e.checked?"radial-gradient(#0A1114,#0A1114),radial-gradient(#4A5546,#4A5546)":"radial-gradient(#0B1215,#0B1215),radial-gradient(122.5% 122.5% at 52.9% 16.25%, #15D264 0%, #2CBD35 36.26%, #DCF45D 92.54%)"},className:(0,o.cn)("relative h-[1em] w-[2.5em] cursor-pointer rounded-[0.4em] text-xl"),onClick:()=>{var s;return null===(s=e.onChange)||void 0===s?void 0:s.call(e,!e.checked)},children:(0,t.jsx)("div",{className:(0,o.cn)("transition-all h-full w-[1.5em] absolute top-0 rounded-[0.4em]",e.checked?"left-[1em]":"-left-[1px]"),style:{background:e.checked?"#3B4144":"radial-gradient(76.25% 76.25% at 50.3% 23.75%, #1BCD59 0%, #B3E854 100%)"}})})}var S=a(6371),P=a(718);function TupleTxt(e){return(0,t.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,t.jsx)("div",{className:"text-xs dark:text-white/60 font-medium",children:e.tit}),(0,t.jsx)("div",{className:(0,o.cn)("text-lg  font-medium flex items-center",e.subClassname),children:e.sub})]})}let V="max-w-4xl mx-auto w-full";function BVaultP(e){let{bvc:s}=e,[a,l]=(0,j.useState)(""),c=(0,o.su)(a),r=s.assetSymbol.includes("-"),h=r?"PT":s.pTokenSymbol,p=r?"LP":s.assetSymbol,[f,v]=(0,j.useState)(""),w=(0,o.su)(f),{bVaultsData:T}=(0,j.useContext)(x.g),B=T[s.vault],{ids:P,claimable:A}=(0,m.gz)(B),E=B.epoches[0],Y=B.userBalanceAssset||0n,R=B.userBalancePToken||0n,F=(null==E?void 0:E.redeemingBalance)||0n,I="Your ".concat(h," can be claimed 1:1 for ").concat(p," at the end of this Epoch"),[D]=(0,m.oU)(B),{data:M}=(0,N.p)(),renderClaimable=()=>(0,t.jsxs)("div",{className:"flex text-xs items-center gap-5",children:["Claimable: ".concat((0,u.d)(A)),(0,t.jsx)(k.v,{className:"",busyShowTxet:!1,txType:"btn-link",tx:"Claim",disabled:A<=0n,config:{abi:i.j5,address:B.vault,functionName:"batchClaimRedeemAssets",args:[P.length>40?P.slice(P.length-40):P]}})]});return(0,t.jsxs)("div",{className:(0,o.cn)("grid grid-cols-1 md:grid-cols-3 gap-5",V),children:[(0,t.jsxs)("div",{className:"card !p-0 overflow-hidden min-h-[16.875rem]",children:[(0,t.jsxs)("div",{className:"flex p-5 bg-[#A3D395] gap-5",children:[(0,t.jsx)(n.Z,{className:"text-[3.375rem]",showBg:!0}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"text-xl text-black font-semibold",children:s.pTokenSymbol}),(0,t.jsx)("div",{className:"text-xs text-black/60 font-medium",children:"Interest bearing rebase principal token"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col p-5 gap-5",children:[(0,t.jsx)(TupleTxt,{tit:"APY",sub:D}),(0,t.jsx)(TupleTxt,{tit:"Total Minted",sub:(0,t.jsxs)(t.Fragment,{children:[(0,u.d)(B.pTokenTotal-B.yTokenAmountForSwapYT),(0,t.jsx)("button",{className:"btn-link ml-auto text-black/60 dark:text-white/60 text-xs",onClick:()=>{null==M||M.watchAsset({type:"ERC20",options:{address:s.pToken,symbol:s.pTokenSymbol,decimals:18}}).catch(o.S3)},children:"Add to wallet"})]})})]})]}),(0,t.jsx)("div",{className:"md:col-span-2 card !p-4",children:(0,t.jsx)(C.x,{data:[{tab:"Mint",content:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(y.W,{asset:s.assetSymbol,amount:a,balance:Y,setAmount:l}),(0,t.jsxs)("div",{className:"text-xs font-medium flex justify-between items-center",children:[(0,t.jsx)("span",{children:"Receive 1 ".concat(h," for every ").concat(p)}),r&&(0,t.jsx)(b(),{target:"_blank",className:"underline",href:(0,d.FN)(s.asset),children:"Get LP on BEX"})]}),(0,t.jsx)(k.v,{className:"mx-auto mt-6",tx:"Mint",disabled:c<=0n||c>Y,spender:s.vault,approves:{[s.asset]:c},config:{abi:i.j5,address:s.vault,functionName:"deposit",args:[c]},onTxSuccess:()=>{l("")}})]})},{tab:"Redeem",content:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(y.W,{asset:s.pTokenSymbol,assetIcon:"Panda",amount:f,balance:R,setAmount:v}),E&&E.settled&&(0,t.jsxs)("div",{className:"flex flex-wrap justify-between items-center h-5",children:[(0,t.jsx)("div",{className:"text-xs font-medium",children:I}),renderClaimable()]}),(0,t.jsx)(k.v,{className:"mx-auto mt-6",tx:"Redeem",spender:null==E?void 0:E.redeemPool,approves:{[s.pToken]:w},disabled:E&&w<=0n||w>R,config:{abi:i.gg,address:(null==E?void 0:E.redeemPool)||g.DR,functionName:"redeem",args:[w]},onTxSuccess:()=>{v("")}}),(!E||!E.settled)&&(0,t.jsxs)("div",{className:"flex flex-wrap justify-between items-center h-5 mt-5",children:[(0,t.jsxs)("div",{className:"text-xs font-medium",children:["Redemption in transit: ".concat((0,u.d)(F))," ",(0,t.jsx)(S.C,{children:"Redemption will be completed at the end of an Epoch."})]}),renderClaimable()]})]})}]})})]})}function BVaultY(e){let{bvc:s}=e,a=s.assetSymbol.includes("-");a||s.pTokenSymbol;let n=a?"YT":s.yTokenSymbol,d=a?"LP token":s.assetSymbol,[h,b]=(0,j.useState)(""),p=(0,o.su)(h),{bVaultsData:f}=(0,j.useContext)(x.g),v=f[s.vault],g=v.epoches[0],N=v.userBalanceAssset||0n,{data:T,refetch:B}=(0,w.u)({abi:i.j5,address:s.vault,functionName:"calcSwap",args:[(0,o.su)("1","gwei")],query:{retry:!0}}),C=(0,r.hp)();(0,j.useEffect)(()=>{B()},[C.time]);let S=(null==g?void 0:g.vaultYTokenBalance)||0n,P=(0,o.ok)(T,"1")*(0,o.su)("1","gwei"),A=S>0n?v.Y*c.Pq/S:0n,E=(0,u.d)(A),Y=p*P/c.Pq,R=S>Y?(v.Y+p)*c.Pq/(S-Y):0n,F=(0,o.Kl)(Y),I=R>A&&A>0n?(R-A)*BigInt(1e10)/A:0n,D=v.yTokenAmountForSwapYT>0n?v.lockedAssetTotal*c.Pq/v.yTokenAmountForSwapYT:0n,[M]=(0,m.v7)(v);return(0,t.jsxs)("div",{className:(0,o.cn)("grid grid-cols-1 md:grid-cols-3 gap-5 mt-5",V),children:[(0,t.jsxs)("div",{className:"card !p-0 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex p-5 bg-[#F0D187] gap-5",children:[(0,t.jsx)(l.Z,{className:"text-[3.375rem]",showBg:!0}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"text-xl text-black font-semibold",children:s.yTokenSymbol}),(0,t.jsx)("div",{className:"text-xs text-black/60 font-medium",children:"Boost bribes yield"})]})]}),(0,t.jsxs)("div",{className:"flex flex-col p-5 gap-5",children:[(0,t.jsxs)("div",{className:"text-base font-semibold flex gap-5 items-end",children:[(0,t.jsxs)("span",{className:"text-4xl font-medium",children:[M,"x"]}),"Bribes Yield"]}),(0,t.jsx)(TupleTxt,{tit:"Total Minted",sub:(0,t.jsxs)(t.Fragment,{children:[(0,u.d)(v.yTokenAmountForSwapYT),(0,t.jsxs)("span",{className:"text-xs ml-auto",children:["1",n," = Yield of ",(0,t.jsx)("br",{}),(0,u.d)(D,2)," ",d]})]})}),g&&(0,t.jsx)(TupleTxt,{tit:"Epoch ".concat(g.epochId.toString()),subClassname:"text-xs",sub:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:[(0,o.d3)(1000n*g.startTime,"date"),"-",(0,o.d3)((g.startTime+g.duration)*1000n,"date")]}),(0,t.jsxs)("span",{className:"ml-auto",children:["~",(0,o.Y)((g.startTime+g.duration)*1000n-BigInt(new Date().getTime()),"d")," days remaining"]})]})})]})]}),(0,t.jsxs)("div",{className:"md:col-span-2 card !p-4 flex flex-col gap-1",children:[(0,t.jsx)(y.W,{asset:s.assetSymbol,amount:h,balance:N,setAmount:b}),(0,t.jsx)("div",{className:"text-base font-bold my-2",children:"Receive"}),(0,t.jsx)(y.W,{asset:s.yTokenSymbol,assetIcon:"Venom",readonly:!0,disable:!0,amount:F}),(0,t.jsxs)("div",{className:"text-xs font-medium  flex justify-between",children:[(0,t.jsx)("span",{children:"Price: 1 ".concat(n,"=").concat(E," ").concat(d)}),(0,t.jsx)("span",{children:"Price Impact: ".concat((0,o.Jh)(I,10,2))})]}),(0,t.jsxs)("div",{className:"text-xs font-medium text-black/80 dark:text-white/80",children:["1\xa0",n," represents the yield ",(0,t.jsx)("span",{className:"font-extrabold text-base",children:"at least"})," 1"," ",d,"\xa0until the end of Epoch."]}),(0,t.jsx)(k.v,{className:"mx-auto mt-6",tx:"Buy",disabled:p<=0n||p>N,config:{abi:i.j5,address:s.vault,functionName:"swap",args:[p]},approves:{[s.asset]:p},spender:s.vault,onTxSuccess:()=>{b("")}})]})]})}function BribeTit(e){return(0,t.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,t.jsx)(T.c,{symbol:"GreenDot",size:14}),(0,t.jsx)("span",{className:"text-sm font-medium",children:e.name})]})}function BVaultPools(e){let{bvc:s}=e,[a,n]=(0,j.useState)(!1),{bVaultsData:l}=(0,j.useContext)(x.g),i=l[s.vault],d=i.epoches,[c,r]=(0,f.Z)(),[m,h]=(0,j.useState)("");(0,o.su)(m);let b="text-black/60 dark:text-white/60 text-sm",onRowClick=e=>{};return(0,t.jsxs)("div",{className:(0,o.cn)("grid grid-cols-1 md:grid-cols-3 gap-5 mt-5",V),children:[(0,t.jsxs)("div",{ref:c,children:[(0,t.jsxs)("div",{className:"flex items-center gap-8 text-xl font-semibold mb-6",children:[(0,t.jsx)("span",{children:"My Pool Only"}),(0,t.jsx)(Switch,{checked:a,onChange:n})]}),(0,t.jsx)(v.aV,{className:d.length>6?"pr-5":"",width:r.width,height:r.height-52,rowHeight:e=>{let{index:s}=e;return s<d.length-1?76:56},overscanRowCount:6,rowCount:d.length,rowRenderer:function(e){let{key:s,style:a,index:n}=e;return(0,t.jsx)("div",{style:a,className:"cursor-pointer",onClick:()=>onRowClick(n),children:(0,t.jsxs)("div",{className:(0,o.cn)("flex h-[56px] card !rounded-lg !p-5 justify-between items-center font-semibold",n<d.length-1?"mb-[20px]":""),children:[(0,t.jsxs)("div",{className:"text-base",children:["Epoch ",d[n].epochId.toString()]}),(0,t.jsx)("div",{className:"text-xs dark:text-white/60",children:"3/4/2024~4/4/2024"})]})},s)}})]}),(0,t.jsxs)("div",{className:"md:col-span-2 card !p-4 flex flex-col gap-2",children:[(0,t.jsxs)("div",{className:"flex gap-6 items-end font-semibold",children:[(0,t.jsx)("span",{className:"text-xl ",children:"Accumulated bribes"}),(0,t.jsx)("span",{className:"text-xs dark:text-white/60",children:"Epoch10"})]}),(0,t.jsx)("div",{className:"flex-1 mt-3 rounded-lg border border-solid border-border p-4",children:(0,t.jsx)(B.ZP,{headerClassName:"text-center text-black/60 dark:text-white/60 border-b-0",rowClassName:"text-center",header:["","","Total","Mine",""],span:{1:2,2:1,3:1},data:[["",(0,t.jsx)(BribeTit,{name:"Bera"},"1"),(0,u.d)(0x1a48beeb15ac55aafea3n),(0,u.d)(0x1a48beeb15ac55aafea3n),""],["",(0,t.jsx)(BribeTit,{name:"RED"},"1"),(0,u.d)(0x1a48beeb15ac55aafea3n),(0,u.d)(0x1a48beeb15ac55aafea3n),""],["",(0,t.jsx)(BribeTit,{name:"ZOO"},"1"),(0,u.d)(0x1a48beeb15ac55aafea3n),(0,u.d)(0x1a48beeb15ac55aafea3n),""],["",(0,t.jsx)(BribeTit,{name:"iBGT"},"1"),(0,u.d)(0x1a48beeb15ac55aafea3n),(0,u.d)(0x1a48beeb15ac55aafea3n),""]]})}),(0,t.jsxs)("div",{className:"rounded-lg border border-solid border-border px-4 py-2 flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"font-semibold text-xs",children:[(0,t.jsxs)("div",{children:["My yToken: ",(0,t.jsx)("span",{className:(0,o.cn)(b),children:(0,u.d)(0n)})]}),(0,t.jsxs)("div",{children:["Time Weighted Points: ",(0,t.jsx)("span",{className:(0,o.cn)(b),children:(0,u.d)(0n)})]})]}),(0,t.jsxs)("div",{children:["My Share: ",(0,t.jsx)("span",{className:(0,o.cn)(b,"text-2xl"),children:(0,o.Jh)(1220n,3,3)})]})]}),(0,t.jsx)(y.W,{asset:s.yTokenSymbol,assetIcon:"Venom",amount:m,balance:0n,setAmount:h}),(0,t.jsx)("span",{className:"text-xs mx-auto",children:"You will receive 0.023% of total bribes"}),(0,t.jsx)(k.v,{className:"mx-auto mt-4",tx:"Harvest",disabled:!0,config:{},onTxSuccess:()=>{h("")}})]})]})}function BVaultMint(e){let{bvc:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(BVaultP,{bvc:s}),(0,t.jsx)(BVaultY,{bvc:s})]})}function BVaultHarvest(e){let{bvc:s}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(BVaultPools,{bvc:s})})}function BVaultCard(e){let{vc:s}=e,a=(0,p.useRouter)(),[n,l]=s.assetSymbol.split("-"),{bVaultsData:i}=(0,j.useContext)(x.g),d=i[s.vault],[c]=(0,m.v7)(d),[r]=(0,m.oU)(d),h=d.epoches[0],b="Epoch ".concat(((null==h?void 0:h.epochId)||1n).toString());return(0,t.jsxs)("div",{className:(0,o.cn)("card cursor-pointer !p-0 grid grid-cols-2 overflow-hidden",{}),onClick:()=>a.push("/b-vaults?vault=".concat(s.vault)),children:[(0,t.jsxs)("div",{className:(0,o.cn)(P.bG,"border-b","bg-black/10 dark:bg-white/10 col-span-2 flex-row px-4 md:px-5 py-4 items-center"),children:[(0,t.jsx)(T.c,{symbol:s.assetSymbol,size:44}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:" text-lg font-semibold whitespace-nowrap",children:s.assetSymbol}),(0,t.jsx)("div",{className:" text-sm font-medium",children:s.assetSymbol.includes("-")?"LP Token":""})]}),(0,t.jsxs)("div",{className:"ml-auto",children:[(0,t.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:"Total Value Locked"}),(0,t.jsx)("div",{className:"text-sm font-medium",children:(0,u.d)(d.lockedAssetTotal)})]})]}),(0,P.BW)(n,0n,0n),(0,P.BW)(l,0n,0n,!0),(0,P.yP)("Status","status",b),(0,P.yP)("Reward","iBGT","iBGT",!0),(0,P.Sn)("Panda","Principal Panda",r,"Venom","Boost Venom","".concat(c,"x"))]})}function BVaultCardComming(e){let{symbol:s}=e;return(0,t.jsxs)("div",{className:(0,o.cn)("card cursor-pointer !p-0 grid grid-cols-2 overflow-hidden h-[367px]",{}),children:[(0,t.jsxs)("div",{className:(0,o.cn)(P.bG,"border-b","bg-black/10 dark:bg-white/10 col-span-2 flex-row px-4 md:px-5 py-4 items-center h-20"),children:[(0,t.jsx)(T.c,{symbol:s,size:44}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:" text-lg font-semibold whitespace-nowrap",children:s}),(0,t.jsx)("div",{className:" text-sm font-medium",children:s.includes("-")?"LP Token":""})]}),(0,t.jsxs)("div",{className:"ml-auto",children:[(0,t.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:"Total Value Locked"}),(0,t.jsx)("div",{className:"text-sm font-medium",children:"$-"})]})]}),(0,t.jsx)("div",{className:(0,o.cn)(P.bG,"col-span-2"),children:(0,t.jsx)("div",{className:"text-xs font-semibold leading-[12px] whitespace-nowrap",children:"New Vault Comming Soon..."})})]})}var A=a(50553),E=a(6868),Y=a(44939),R=a(87031),F=a(59175),I=a(62600);let D=["mint","harvest"];function Vaults(){let e=(0,F.p)(),s=R.Fw[e];s[0];let a=(0,p.useSearchParams)(),n=a.get("vault"),l=a.get("tab");D.includes(l);let i=s.find(e=>e.vault==n);return(0,t.jsx)(Y.E,{children:(0,t.jsxs)("div",{className:"w-full max-w-[1160px] px-4 mx-auto md:pb-8",children:[(0,t.jsx)(A.a,{}),i?(0,t.jsx)(C.x,{listClassName:"flex-wrap p-0 mb-5 md:gap-14",triggerClassName:'text-lg sm:text-xl md:text-2xl py-0 data-[state="active"]:border-b border-b-black dark:border-b-white leading-[0.8] rounded-none whitespace-nowrap',contentClassName:"gap-5",data:[{tab:"Mint",content:(0,t.jsx)(BVaultMint,{bvc:i})},{tab:"Harvest",content:(0,t.jsx)(BVaultHarvest,{bvc:i})}]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"page-title",children:"B-Vaults"}),(0,t.jsx)(E.K,{data:"A pendle-like product with more innovation."}),(0,t.jsx)(I.r,{numItems:1,numItemsMd:2,numItemsLg:3,className:"gap-5 mt-4",children:c._u?(0,t.jsx)(t.Fragment,{children:s.map((e,s)=>(0,t.jsx)(BVaultCard,{vc:e},"group_vault_item_".concat(s)))}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(BVaultCardComming,{symbol:"HONEY-USDC"}),(0,t.jsx)(BVaultCardComming,{symbol:"HONEY-WBTC"}),(0,t.jsx)(BVaultCardComming,{symbol:"HONEY-WETH"})]})})]})]})})}}},function(e){e.O(0,[4881,7495,7622,3113,3458,5294,3119,8410,9912,5631,5116,648,4287,299,4138,2159,7112,9161,7093,604,1744],function(){return e(e.s=92537)}),_N_E=e.O()}]);