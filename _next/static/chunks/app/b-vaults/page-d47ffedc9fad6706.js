(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9102],{92537:function(e,t,a){Promise.resolve().then(a.bind(a,42153))},42153:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Vaults}});var s=a(31113),n=a(30639),l=a(4283),o=a(73417),r=a(73216),c=a(22139),i=a(15506),d=a(26361),u=a(59175),m=a(23647),x=a(84944),p=a(64370),b=a(88495),h=a(64103),f=a(58714),v=a(62531),g=a(96670),j=a(93108),B=a(25300);async function getBVaultData(e,t){let a=await e.readContract({abi:o.j5,address:t.vault,functionName:"epochIdCount"});return Promise.all([e.readContract({abi:f.Wo,address:t.pToken,functionName:"totalSupply"}),e.readContract({abi:o.j5,address:t.vault,functionName:"assetBalance"}),e.readContract({abi:o.j5,address:t.vault,functionName:"paramValue",args:[(0,v.$G)("f2",{size:32})]}),a&&"0xF778D2B9E0238D385008e916D7245F51959Ba279"!==t.vault?e.readContract({abi:o.j5,address:t.vault,functionName:"Y"}):Promise.resolve(0n),a?e.readContract({abi:o.j5,address:t.vault,functionName:"yTokenTotalSupply",args:[a]}):0n,a?e.readContract({abi:o.j5,address:t.vault,functionName:"yTokenTotalSupplySynthetic",args:[a]}):0n,a?e.readContract({abi:o.j5,address:t.vault,functionName:"yTokenUserBalance",args:[a,t.vault]}):0n]).then(e=>{let[s,n,l,o,r,c,i]=e;return{epochCount:a,pTokenTotal:s,vault:t.vault,lockedAssetTotal:n,f2:l,Y:o,yTokenTotalSupply:r,yTokenTotalSupplySynthetic:c,assetAmountForSwapYT:(0,d.aE)(s-r,l),yTokenAmountForSwapYT:r-i}})}async function getBVaultEpochData(e,t,a){let getRedeemPoolData=async t=>{let a=await e.readContract({abi:o.gg,address:t,functionName:"settled"});return{settled:a}},[s,n,l,r]=await Promise.all([e.readContract({abi:o.j5,address:t.vault,functionName:"epochInfoById",args:[a]}).then(e=>getRedeemPoolData(e.redeemPool).then(t=>({...e,...t}))),e.readContract({abi:o.j5,address:t.vault,functionName:"yTokenTotalSupply",args:[a]}),e.readContract({abi:o.j5,address:t.vault,functionName:"yTokenTotalSupplySynthetic",args:[a]}),e.readContract({abi:o.j5,address:t.vault,functionName:"yTokenUserBalance",args:[a,t.vault]})]);return{...s,yTokenTotal:n,yTokenTotalSupplySynthetic:l,vaultYTokenBalance:r}}let defBvaults=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,d.Yb)(e,e=>(0,d.Yb)({vault:e,epochCount:0n,pTokenTotal:0n,lockedAssetTotal:0n,f2:0n,Y:0n,yTokenTotalSupply:0n,yTokenTotalSupplySynthetic:0n,assetAmountForSwapYT:0n,yTokenAmountForSwapYT:0n},0n))},defUserBvaults=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,d.Yb)(e,e=>(0,d.Yb)({vault:e,userBalanceAssset:0n,userBalancePToken:0n,redeemingBalance:0n},0n))},defEpoches=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,d.Yb)(e,[])},N=(0,j.Ue)((e,t)=>({isLoading:!1,bvaults:defBvaults(),userBvaults:defUserBvaults(),epochs:defEpoches(),userEpochs:defEpoches(),updateBVaults:a=>(0,d.XD)(async()=>{let s=m.bv.getState().pc;if(!s)throw"No public client";let n=await Promise.all(a.map(e=>getBVaultData(s,e)));return e({bvaults:defBvaults((0,b.Uy)(t().bvaults,e=>{n.forEach(t=>{e[t.vault]=(0,d.Yb)(t,0n)})}))}),n}),updateUserBVaults:(a,s)=>(0,d.XD)(async()=>{let n=m.bv.getState().pc;if(!n)throw"No public client";let l=await Promise.all(a.map(e=>{let a=t().bvaults[e.vault];return Promise.all([n.readContract({abi:f.Wo,address:e.asset,functionName:"balanceOf",args:[s]}),n.readContract({abi:f.Wo,address:e.pToken,functionName:"balanceOf",args:[s]}),a.epochCount?n.readContract({abi:o.j5,address:e.vault,functionName:"epochInfoById",args:[a.epochCount]}).then(e=>n.readContract({abi:o.gg,address:e.redeemPool,functionName:"settled"}).then(t=>({epoch:e,settled:t}))).then(e=>{let{epoch:t,settled:a}=e;return a?0n:n.readContract({abi:o.gg,address:t.redeemPool,functionName:"userRedeemingBalance",args:[s]})}):Promise.resolve(0n)]).then(t=>{let[a,s,n]=t;return{userBalanceAssset:a,userBalancePToken:s,vault:e.vault,redeemingBalance:n}})}));return e({userBvaults:defUserBvaults((0,b.Uy)(t().userBvaults,e=>{l.forEach(t=>{e[t.vault]=(0,d.Yb)(t,0n)})}))}),l}),updateEpoches:(a,s)=>(0,d.XD)(async()=>{let n=m.bv.getState().pc;if(!n)throw"No public client";let l=Array(parseInt(s.epochCount.toString())).fill(0).map((e,t)=>s.epochCount-BigInt(t)),o=await (s.epochCount>0n?Promise.all(l.map(e=>getBVaultEpochData(n,a,e))):Promise.resolve([]));return e({epochs:defEpoches({...t().epochs,[a.vault]:o})}),o}),updateUserEpoches:(a,s,n)=>(0,d.XD)(async()=>{let l=m.bv.getState().pc;if(!l)throw"No public client";let getRedeemPoolData=(e,t)=>Promise.all([t.settled?Promise.resolve(0n):l.readContract({abi:o.gg,address:e,functionName:"userRedeemingBalance",args:[n]}),l.readContract({abi:o.gg,address:e,functionName:"earnedAssetAmount",args:[n]})]).then(e=>{let[t,a]=e;return{redeemingBalance:t,claimableAssetBalance:a}}),getBribe=async(e,t)=>{let s=await l.readContract({abi:o.j5,address:a.vault,functionName:"bribeTotalAmount",args:[e,t.bribeToken]}),n=await l.readContract({abi:f.Wo,address:t.bribeToken,functionName:"symbol"});return{...t,totalRewards:s,bribeSymbol:n}},getBribes=async e=>{let t=await l.readContract({abi:o.j5,address:a.vault,functionName:"calcBribes",args:[e,n]});return Promise.all(t.map(t=>getBribe(e,t)))},r=await Promise.all(s.map(e=>Promise.all([getBribes(e.epochId),getRedeemPoolData(e.redeemPool,e),l.readContract({abi:o.j5,address:a.vault,functionName:"yTokenUserBalance",args:[e.epochId,n]}),l.readContract({abi:o.j5,address:a.vault,functionName:"yTokenUserBalanceSynthetic",args:[e.epochId,n]})]).then(t=>{let[a,s,n,l]=t;return{epochId:e.epochId,bribes:a,...s,userBalanceYToken:n,userBalanceYTokenSyntyetic:l}})));return e({userEpochs:defEpoches({...t().userEpochs,[a.vault]:r})}),r})}));function useBVaultsDataShallow(e){return N((0,B.N)(e))}function useBVaultData(e){let t="string"==typeof e?e:e.vault;return useBVaultsDataShallow(e=>e.bvaults[t])}function useEpochesData(e){let t=useBVaultsDataShallow(t=>{let{epochs:a,userEpochs:s}=t;return a[e].map(t=>(0,d.Yb)({...t,...s[e].find(e=>e.epochId==t.epochId)||{}},0n))});return t}function useBVaultBoost(e){let t=useBVaultData(e),a=t.assetAmountForSwapYT>0n?100n*t.lockedAssetTotal/t.assetAmountForSwapYT:100000n;return[(0,x.d)(a,0,2),a]}function useBVaultApy(e){let t=useBVaultData(e),a=t.yTokenTotalSupplySynthetic>0n?t.assetAmountForSwapYT*c.SH*BigInt(1e10)/t.yTokenTotalSupplySynthetic:0n;return[(0,d.Jh)(a,10),a]}var y=a(42487),T=a.n(y),S=a(69708),w=a(85665),k=a(20265),E=a(67541),C=a(4408),A=a(30308),D=a(99548),V=a(91214),P=a(95702),Y=a(75496),F=a(16738);function Switch(e){return(0,s.jsx)("div",{style:{padding:1,border:"1px solid transparent",backgroundRepeat:"no-repeat",backgroundClip:"padding-box,border-box",backgroundOrigin:"padding-box,border-box",backgroundImage:e.checked?"radial-gradient(#0B1215,#0B1215),radial-gradient(122.5% 122.5% at 52.9% 16.25%, #15D264 0%, #2CBD35 36.26%, #DCF45D 92.54%)":"radial-gradient(#0A1114,#0A1114),radial-gradient(#4A5546,#4A5546)"},className:(0,d.cn)("relative h-[1em] w-[2.5em] cursor-pointer rounded-[0.4em] text-xl"),onClick:()=>{var t;return null===(t=e.onChange)||void 0===t?void 0:t.call(e,!e.checked)},children:(0,s.jsx)("div",{className:(0,d.cn)("transition-all h-full w-[1.5em] absolute top-0 rounded-[0.4em]",e.checked?"-left-[1px]":"left-[1em]"),style:{background:e.checked?"radial-gradient(76.25% 76.25% at 50.3% 23.75%, #1BCD59 0%, #B3E854 100%)":"#3B4144"}})})}var I=a(6371),R=a(718);function TupleTxt(e){return(0,s.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,s.jsx)("div",{className:"text-xs dark:text-white/60 font-medium",children:e.tit}),(0,s.jsx)("div",{className:(0,d.cn)("text-lg  font-medium flex items-center",e.subClassname),children:e.sub})]})}let H="max-w-4xl mx-auto w-full";function BVaultP(e){let{bvc:t}=e,[a,l]=(0,h.useState)(""),c=(0,d.su)(a),i=t.assetSymbol.includes("-"),u=i?"PT":t.pTokenSymbol,m=i?"LP":t.assetSymbol,[p,b]=(0,h.useState)(""),f=(0,d.su)(p),[v,g]=useBVaultsDataShallow(e=>[e.bvaults[t.vault],e.userBvaults[t.vault]]),j=useBVaultsDataShallow(e=>e.epochs[t.vault][0]),{ids:B,claimable:N}=function(e){let t=useEpochesData(e);return(0,h.useMemo)(()=>{let e=t.filter(e=>e.claimableAssetBalance&&e.settled);return{ids:e.map(e=>e.epochId),claimable:e.reduce((e,t)=>e+t.claimableAssetBalance,0n)}},[t])}(t.vault),y=g.userBalanceAssset||0n,S=g.userBalancePToken||0n,w=g.redeemingBalance||0n,k="Your ".concat(u," can be claimed 1:1 for ").concat(m," at the end of this Epoch"),[A]=useBVaultApy(t.vault),{data:P}=(0,C.p)(),renderClaimable=()=>(0,s.jsxs)("div",{className:"flex text-xs items-center gap-5",children:["Claimable: ".concat((0,x.d)(N)),(0,s.jsx)(D.v,{className:"",busyShowTxet:!1,txType:"btn-link",tx:"Claim",disabled:N<=0n,config:{abi:o.j5,address:v.vault,functionName:"batchClaimRedeemAssets",args:[B.length>40?B.slice(B.length-40):B]}})]});return(0,s.jsxs)("div",{className:(0,d.cn)("grid grid-cols-1 md:grid-cols-3 gap-5",H),children:[(0,s.jsxs)("div",{className:"card !p-0 overflow-hidden min-h-[16.875rem]",children:[(0,s.jsxs)("div",{className:"flex p-5 bg-[#A3D395] gap-5",children:[(0,s.jsx)(n.Z,{className:"text-[3.375rem]",showBg:!0}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{className:"text-xl text-black font-semibold",children:t.pTokenSymbol}),(0,s.jsx)("div",{className:"text-xs text-black/60 font-medium",children:"Interest bearing rebase principal token"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col p-5 gap-5",children:[(0,s.jsx)(TupleTxt,{tit:"APY",sub:A}),(0,s.jsx)(TupleTxt,{tit:"Total Minted",sub:(0,s.jsxs)(s.Fragment,{children:[(0,x.d)(v.pTokenTotal),(0,s.jsx)("button",{className:"btn-link ml-auto text-black/60 dark:text-white/60 text-xs",onClick:()=>{null==P||P.watchAsset({type:"ERC20",options:{address:t.pToken,symbol:t.pTokenSymbol,decimals:18}}).catch(d.S3)},children:"Add to wallet"})]})})]})]}),(0,s.jsx)("div",{className:"md:col-span-2 card !p-4",children:(0,s.jsx)(F.x,{data:[{tab:"Mint",content:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(V.W,{asset:t.assetSymbol,amount:a,balance:y,setAmount:l}),(0,s.jsxs)("div",{className:"text-xs font-medium flex justify-between items-center",children:[(0,s.jsx)("span",{children:"Receive 1 ".concat(u," for every ").concat(m)}),i&&(0,s.jsx)(T(),{target:"_blank",className:"underline",href:(0,r.FN)(t.asset),children:"Get LP on BEX"})]}),(0,s.jsx)(D.v,{className:"mx-auto mt-6",tx:"Mint",disabled:c<=0n||c>y,spender:t.vault,approves:{[t.asset]:c},config:{abi:o.j5,address:t.vault,functionName:"deposit",args:[c]},onTxSuccess:()=>{l("")}})]})},{tab:"Redeem",content:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(V.W,{asset:t.pTokenSymbol,assetIcon:"Panda",amount:p,balance:S,setAmount:b}),j&&j.settled&&(0,s.jsxs)("div",{className:"flex flex-wrap justify-between items-center h-5",children:[(0,s.jsx)("div",{className:"text-xs font-medium",children:k}),renderClaimable()]}),(0,s.jsx)(D.v,{className:"mx-auto mt-6",tx:"Redeem",spender:null==j?void 0:j.redeemPool,approves:{[t.pToken]:f},disabled:j&&f<=0n||f>S,config:{abi:o.gg,address:(null==j?void 0:j.redeemPool)||E.DR,functionName:"redeem",args:[f]},onTxSuccess:()=>{b("")}}),(!j||!j.settled)&&(0,s.jsxs)("div",{className:"flex flex-wrap justify-between items-center h-5 mt-5",children:[(0,s.jsxs)("div",{className:"text-xs font-medium",children:["Redemption in transit: ".concat((0,x.d)(w))," ",(0,s.jsx)(I.C,{children:"Redemption will be completed at the end of an Epoch."})]}),renderClaimable()]})]})}]})})]})}function BVaultY(e){let{bvc:t}=e,a=t.assetSymbol.includes("-");a||t.pTokenSymbol;let n=a?"YT":t.yTokenSymbol,r=a?"LP token":t.assetSymbol,[u,m]=(0,h.useState)(""),p=(0,d.su)(u),[b,f]=useBVaultsDataShallow(e=>[e.bvaults[t.vault],e.userBvaults[t.vault]]),v=useBVaultsDataShallow(e=>e.epochs[t.vault][0]),g=f.userBalanceAssset||0n,{data:j,refetch:B}=(0,A.u)({abi:o.j5,address:t.vault,functionName:"calcSwap",args:[p],query:{retry:!0}}),N=(0,i.hp)();(0,h.useEffect)(()=>{B()},[N.time]);let y=(null==v?void 0:v.vaultYTokenBalance)||0n,T=(0,d.ok)(j,"1"),S=y>0n?b.Y*c.Pq/y:0n,w=(0,x.d)(S),k=y>T?(b.Y+p)*c.Pq/(y-T):0n,E=(0,d.Kl)(T),C=k>S&&S>0n?(k-S)*BigInt(1e10)/S:0n,P=b.yTokenAmountForSwapYT>0n?b.lockedAssetTotal*c.Pq/b.yTokenAmountForSwapYT:0n,[Y]=useBVaultBoost(t.vault);return(0,s.jsxs)("div",{className:(0,d.cn)("grid grid-cols-1 md:grid-cols-3 gap-5 mt-5",H),children:[(0,s.jsxs)("div",{className:"card !p-0 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex p-5 bg-[#F0D187] gap-5",children:[(0,s.jsx)(l.Z,{className:"text-[3.375rem]",showBg:!0}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{className:"text-xl text-black font-semibold",children:t.yTokenSymbol}),(0,s.jsx)("div",{className:"text-xs text-black/60 font-medium",children:"Boost bribes yield"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col p-5 gap-5",children:[(0,s.jsxs)("div",{className:"text-base font-semibold flex gap-5 items-end",children:[(0,s.jsxs)("span",{className:"text-4xl font-medium",children:[Y,"x"]}),"Bribes Yield"]}),(0,s.jsx)(TupleTxt,{tit:"Total Minted",sub:(0,s.jsxs)(s.Fragment,{children:[(0,x.d)(b.yTokenAmountForSwapYT),(0,s.jsxs)("span",{className:"text-xs ml-auto",children:["1",n," = Yield of ",(0,s.jsx)("br",{}),(0,x.d)(P,2)," ",r]})]})}),v&&(0,s.jsx)(TupleTxt,{tit:"Epoch ".concat(v.epochId.toString()),subClassname:"text-xs",sub:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{children:[(0,d.d3)(1000n*v.startTime,"date"),"-",(0,d.d3)((v.startTime+v.duration)*1000n,"date")]}),(0,s.jsxs)("span",{className:"ml-auto whitespace-nowrap",children:["~",(0,d.Y)((v.startTime+v.duration)*1000n-BigInt(new Date().getTime())),(0,s.jsx)("br",{}),"remaining"]})]})})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2 card !p-4 flex flex-col gap-1",children:[(0,s.jsx)(V.W,{asset:t.assetSymbol,amount:u,balance:g,setAmount:m}),(0,s.jsx)("div",{className:"text-base font-bold my-2",children:"Receive"}),(0,s.jsx)(V.W,{asset:t.yTokenSymbol,assetIcon:"Venom",readonly:!0,disable:!0,amount:E}),(0,s.jsxs)("div",{className:"text-xs font-medium  flex justify-between",children:[(0,s.jsx)("span",{children:"Price: 1 ".concat(n,"=").concat(w," ").concat(r)}),(0,s.jsx)("span",{children:"Price Impact: ".concat((0,d.Jh)(C,10,2))})]}),(0,s.jsxs)("div",{className:"text-xs font-medium text-black/80 dark:text-white/80",children:["1\xa0",n," represents the yield ",(0,s.jsx)("span",{className:"font-extrabold text-base",children:"at least"})," 1 ",r,"\xa0until the end of Epoch."]}),(0,s.jsx)(D.v,{className:"mx-auto mt-6",tx:"Buy",disabled:p<=0n||p>g,config:{abi:o.j5,address:t.vault,functionName:"swap",args:[p]},approves:{[t.asset]:p},spender:t.vault,onTxSuccess:()=>{m("")}})]})]})}function BribeTit(e){return(0,s.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,s.jsx)(P.c,{symbol:"GreenDot",size:14}),(0,s.jsx)("span",{className:"text-sm font-medium",children:e.name})]})}function BVaultPools(e){let{bvc:t}=e,[a,n]=(0,h.useState)(!0),l=useEpochesData(t.vault),r=(0,h.useMemo)(()=>a?l.filter(e=>e.bribes.reduce((e,t)=>e+t.bribeAmount,0n)>0n):l,[l,a]),[i,u]=(0,w.Z)(),[m,p]=(0,h.useState)("");(0,d.su)(m);let b="text-black/60 dark:text-white/60 text-sm",[f,v]=(0,h.useState)(r[0]);(0,h.useEffect)(()=>{v(r[0])},[r]);let g=(null==f?void 0:f.userBalanceYToken)||0n,onRowClick=e=>{v(r[e])},j=(null==f?void 0:f.bribes)||[],B=(0,h.useMemo)(()=>{let e=j.find(e=>e.bribeAmount>0n);return e?(0,d.Jh)(e.bribeAmount*c.Pq/e.totalRewards,18):(0,d.Jh)(0n,0n)},[j]);return(0,s.jsxs)("div",{className:(0,d.cn)("grid grid-cols-1 md:grid-cols-3 gap-5 mt-5",H),children:[(0,s.jsxs)("div",{ref:i,children:[(0,s.jsxs)("div",{className:"flex items-center gap-8 text-xl font-semibold mb-6",children:[(0,s.jsx)("span",{children:"My Pool Only"}),(0,s.jsx)(Switch,{checked:a,onChange:n})]}),(0,s.jsx)(k.aV,{className:r.length>6?"pr-5":"",width:u.width,height:u.height-52,rowHeight:e=>{let{index:t}=e;return t<r.length-1?76:56},overscanRowCount:6,rowCount:r.length,rowRenderer:function(e){let{key:t,style:a,index:n}=e;return(0,s.jsx)("div",{style:a,className:"cursor-pointer",onClick:()=>onRowClick(n),children:(0,s.jsxs)("div",{className:(0,d.cn)("flex h-[56px] card !rounded-lg !p-5 justify-between items-center font-semibold",n<r.length-1?"mb-[20px]":""),children:[(0,s.jsxs)("div",{className:"text-base",children:["Epoch ",r[n].epochId.toString()]}),(0,s.jsx)("div",{className:"text-xs dark:text-white/60",children:"3/4/2024~4/4/2024"})]})},t)}})]}),(0,s.jsxs)("div",{className:"md:col-span-2 card !p-4 flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex gap-6 items-end font-semibold",children:[(0,s.jsx)("span",{className:"text-xl ",children:"Accumulated bribes"}),(0,s.jsxs)("span",{className:"text-xs dark:text-white/60",children:["Epoch ",((null==f?void 0:f.epochId)||1n).toString()]})]}),(0,s.jsx)("div",{className:"flex-1 mt-3 rounded-lg border border-solid border-border p-4",children:(0,s.jsx)(Y.ZP,{headerClassName:"text-center text-black/60 dark:text-white/60 border-b-0",rowClassName:"text-center",header:["","","Total","Mine",""],span:{1:2,2:1,3:1},data:j.map(e=>["",(0,s.jsx)(BribeTit,{name:e.bribeSymbol},"1"),(0,x.d)(e.totalRewards),(0,x.d)(e.bribeAmount),""])})}),(0,s.jsxs)("div",{className:"rounded-lg border border-solid border-border px-4 py-2 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"font-semibold text-xs",children:[(0,s.jsxs)("div",{children:["My yToken: ",(0,s.jsx)("span",{className:(0,d.cn)(b),children:(0,x.d)(g)})]}),(0,s.jsxs)("div",{children:["Time Weighted Points: ",(0,s.jsx)("span",{className:(0,d.cn)(b),children:(0,x.d)(null==f?void 0:f.userBalanceYTokenSyntyetic)})]})]}),(0,s.jsxs)("div",{children:["My Share: ",(0,s.jsx)("span",{className:(0,d.cn)(b,"text-2xl"),children:B})]})]}),(0,s.jsxs)("span",{className:"text-xs mx-auto",children:["You will receive ",B," of total bribes"]}),(0,s.jsx)(D.v,{className:"mx-auto mt-4",tx:"Harvest",disabled:!f||!(null==f?void 0:f.settled),config:{abi:o.j5,address:t.vault,functionName:"claimBribes",args:[null==f?void 0:f.epochId]},onTxSuccess:()=>{p("")}})]})]})}function BVaultMint(e){let{bvc:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(BVaultP,{bvc:t}),(0,s.jsx)(BVaultY,{bvc:t})]})}function BVaultHarvest(e){let{bvc:t}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(BVaultPools,{bvc:t})})}function BVaultCard(e){let{vc:t}=e,a=(0,S.useRouter)(),[n,l]=t.assetSymbol.split("-"),o=useBVaultData(t),[r]=useBVaultBoost(t.vault),[c]=useBVaultApy(t.vault),i="Epoch ".concat(o.epochCount.toString());return(0,s.jsxs)("div",{className:(0,d.cn)("card cursor-pointer !p-0 grid grid-cols-2 overflow-hidden",{}),onClick:()=>a.push("/b-vaults?vault=".concat(t.vault)),children:[(0,s.jsxs)("div",{className:(0,d.cn)(R.bG,"border-b","bg-black/10 dark:bg-white/10 col-span-2 flex-row px-4 md:px-5 py-4 items-center"),children:[(0,s.jsx)(P.c,{symbol:t.assetSymbol,size:44}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:" text-lg font-semibold whitespace-nowrap",children:t.assetSymbol}),(0,s.jsx)("div",{className:" text-sm font-medium",children:t.assetSymbol.includes("-")?"LP Token":""})]}),(0,s.jsxs)("div",{className:"ml-auto",children:[(0,s.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:"Total Value Locked"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:(0,x.d)(o.lockedAssetTotal)})]})]}),(0,R.BW)(n,0n,0n),(0,R.BW)(l,0n,0n,!0),(0,R.yP)("Status","status",i),(0,R.yP)("Reward","iBGT","iBGT",!0),(0,R.Sn)("Panda","Principal Panda",c,"Venom","Boost Venom","".concat(r,"x"))]})}function BVaultCardComming(e){let{symbol:t}=e;return(0,s.jsxs)("div",{className:(0,d.cn)("card cursor-pointer !p-0 grid grid-cols-2 overflow-hidden h-[367px]",{}),children:[(0,s.jsxs)("div",{className:(0,d.cn)(R.bG,"border-b","bg-black/10 dark:bg-white/10 col-span-2 flex-row px-4 md:px-5 py-4 items-center h-20"),children:[(0,s.jsx)(P.c,{symbol:t,size:44}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:" text-lg font-semibold whitespace-nowrap",children:t}),(0,s.jsx)("div",{className:" text-sm font-medium",children:t.includes("-")?"LP Token":""})]}),(0,s.jsxs)("div",{className:"ml-auto",children:[(0,s.jsx)("div",{className:"text-[#64748B] dark:text-slate-50/60 text-xs font-semibold whitespace-nowrap",children:"Total Value Locked"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:"$-"})]})]}),(0,s.jsx)("div",{className:(0,d.cn)(R.bG,"col-span-2"),children:(0,s.jsx)("div",{className:"text-xs font-semibold leading-[12px] whitespace-nowrap",children:"New Vault Comming Soon..."})})]})}var O=a(50553),U=a(6868),W=a(44939),_=a(87031),M=a(62600);let q=["mint","harvest"];function BVaultPage(e){let{bvc:t}=e;return!function(e){let t=useBVaultData(e);(0,p.a)({queryKey:[e,t],enabled:t.epochCount>0n,queryFn:()=>N.getState().updateEpoches(e,t)})}(t),!function(e){let{address:t}=(0,g.m)(),a=useBVaultData(e);(0,h.useEffect)(()=>{N.setState({userBvaults:defUserBvaults(),userEpochs:defEpoches()})},[t]),(0,p.a)({queryKey:[t,e,a],enabled:!!t,queryFn:()=>N.getState().updateUserBVaults([e],t)})}(t),!function(e){let t=useBVaultsDataShallow(t=>t.epochs[e.vault]),{address:a}=(0,g.m)();(0,p.a)({queryKey:[e,t,a],enabled:t.length>0&&!!a,queryFn:()=>N.getState().updateUserEpoches(e,t,a)})}(t),(0,s.jsx)(F.x,{listClassName:"flex-wrap p-0 mb-5 md:gap-14",triggerClassName:'text-lg sm:text-xl md:text-2xl py-0 data-[state="active"]:border-b border-b-black dark:border-b-white leading-[0.8] rounded-none whitespace-nowrap',contentClassName:"gap-5",data:[{tab:"Mint",content:(0,s.jsx)(BVaultMint,{bvc:t})},{tab:"Harvest",content:(0,s.jsx)(BVaultHarvest,{bvc:t})}]})}function Vaults(){let e=(0,u.p)(),t=_.Fw[e].filter(e=>e.onEnv&&e.onEnv.includes(c.Vi)),a=(0,S.useSearchParams)(),n=a.get("vault"),l=a.get("tab");q.includes(l);let o=t.find(e=>e.vault==n);return!function(e){let t=(0,u.p)();(0,h.useEffect)(()=>{N.setState({bvaults:defBvaults(),userBvaults:defUserBvaults(),epochs:defEpoches(),userEpochs:defEpoches()})},[t]),(0,p.a)({queryFn:()=>N.getState().updateBVaults(e),queryKey:[e]})}(t),(0,s.jsx)(W.E,{children:(0,s.jsxs)("div",{className:"w-full max-w-[1160px] px-4 mx-auto md:pb-8",children:[(0,s.jsx)(O.a,{}),o?(0,s.jsx)(BVaultPage,{bvc:o}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"page-title",children:"B-Vaults"}),(0,s.jsx)(U.K,{data:"A pendle-like product with more innovation."}),(0,s.jsxs)(M.r,{numItems:1,numItemsMd:2,numItemsLg:3,className:"gap-5 mt-4",children:[t.map((e,t)=>(0,s.jsx)(BVaultCard,{vc:e},"group_vault_item_".concat(t))),0==t.length&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(BVaultCardComming,{symbol:"HONEY-USDC"}),(0,s.jsx)(BVaultCardComming,{symbol:"HONEY-WBTC"}),(0,s.jsx)(BVaultCardComming,{symbol:"HONEY-WETH"})]})]})]})]})})}},95702:function(e,t,a){"use strict";a.d(t,{c:function(){return CoinIcon}});var s=a(31113),n=a(26758);let l={iBGT:"webp","HONEY-WBERA":"webp"};function CoinIcon(e){let{symbol:t,size:a=48,...o}=e,r=t in l?l[t]:"svg",c="".concat(n.G,"/").concat(t,".").concat(r);return(0,s.jsx)("img",{...o,width:a,height:a,src:c,alt:t})}},87031:function(e,t,a){"use strict";a.d(t,{Fw:function(){return o}});var s=a(73216);let n="0xF86a9a53D963B7a845F3496a97d0dB11cEc3c4E0",l="0x97d82C639835F4EfaCC366fdE78CA0c4EC2a2A83",o={[s.BG.id]:[{vault:"0x6a6B9817d221816187aD335030b0EF7c17051EfA",asset:"0xD69ADb6FB5fD6D06E6ceEc5405D95A37F96E3b96",assetSymbol:"HONEY-USDC",pToken:"0xbB6A3a94cccAe455444e9a1E1CD478CAc278Be3E",pTokenSymbol:"pHONEY-USDC",yTokenSymbol:"yHONEY-USDC",protocolAddress:n,protocolSettingsAddress:l,onEnv:["beta"]},{vault:"0xF484F7D00DD44c1F8B047b79cF8674e78FEcaba7",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x9C476C0Ee24768fE74b5A6768a7E7c901e51E409",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:n,protocolSettingsAddress:l,onEnv:["beta"]},{vault:"0xF778D2B9E0238D385008e916D7245F51959Ba279",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x1f779e869E4769bD9129b7FE8B3a46350FA2Fbe7",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:n,protocolSettingsAddress:l,onEnv:["beta"]},{vault:"0x686C72Aecf2D08410A8270D514B0Dc3Cc72e5288",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x19fa905c43B7B3e4698266250f2f7909610b54B1",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:n,protocolSettingsAddress:l,onEnv:["beta"]},{vault:"0xB0a0C11a77E67acBD161cc44743a1774f2C4Fff5",asset:"0xd28d852cbcc68dcec922f6d5c7a8185dbaa104b7",assetSymbol:"HONEY-WBERA",pToken:"0x8b117042C1C6C45656bE0A2160CEbD405C6016bc",pTokenSymbol:"pHONEY-BERA",yTokenSymbol:"yHONEY-BERA",protocolAddress:n,protocolSettingsAddress:l,onEnv:["beta","test"]}]}},26758:function(e,t,a){"use strict";a.d(t,{G:function(){return n}});var s=a(28070);let n=s.env.NEXT_PUBLIC_BASE_PATH||""},22139:function(e,t,a){"use strict";a.d(t,{Hj:function(){return l},Pq:function(){return o},SH:function(){return r},Vi:function(){return i},_u:function(){return d},pn:function(){return c},v:function(){return n},xb:function(){return DOC_LINK}});var s=a(44769);let n="https://x.com/ZooFinanceIO",l="https://t.co/RJwdwdawe5",o=BigInt(1e18),r=BigInt("31536000"),c=864e5,DOC_LINK=()=>"https://docs.".concat(s.Kh.value),i="beta",d="beta"==i},44769:function(e,t,a){"use strict";a.d(t,{Kh:function(){return n},Vi:function(){return useConfigDomain}});var s=a(64103);let n={value:"zoofi.io"},l=["zoofi.io","zoofi.xyz"],getAvilableDomain=()=>{var e;if("localhost"==location.hostname||(null===(e=location.hostname.match(/^\d+\.\d+\.\d+\.\d+$/))||void 0===e?void 0:e.length)==1)return l[0];let t=location.hostname.split("."),a=t.slice(-2).join(".");return("ipns"==t[1]&&(a=t[0].replaceAll("-",".")),l.includes(a))?a:l[0]};function useConfigDomain(){(0,s.useEffect)(()=>{n.value=getAvilableDomain()},[])}}},function(e){e.O(0,[4881,7495,7622,3113,3458,5294,9720,8410,5631,5116,648,4287,6166,3063,7112,9161,7093,604,1744],function(){return e(e.s=92537)}),_N_E=e.O()}]);